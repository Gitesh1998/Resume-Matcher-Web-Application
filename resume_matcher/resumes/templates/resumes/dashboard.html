<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
    <h2>Welcome to the Dashboard</h2>
    <p>You are logged in as: {{ request.user.username }}</p>
    
    <!-- Logout Form -->
    <form action="{% url 'logout' %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">Logout</button>
    </form>

    <hr>

    <!-- Resume Upload Form -->
    <h4>Upload Resume (PDF)</h4>
    <form action="{% url 'upload_resume' %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="resume" accept=".pdf" class="form-control mb-2" required>
        <button type="submit" class="btn btn-primary">Upload Resume</button>
    </form>

    <hr>

    <!-- Job Description Form -->
    <h4>Enter Job Description</h4>
    <form action="{% url 'match_resumes' %}" method="post">
        {% csrf_token %}
        <textarea name="job_description" rows="6" class="form-control mb-2" required></textarea>
        <button type="submit" class="btn btn-success">Match Resumes</button>
    </form>

    {% if matched_resume %}
    <hr>
    <h4>Best Matched Resume</h4>
    <table class="table table-bordered">
        <thead>
            <tr><th>Filename</th><th>Similarity %</th></tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ matched_resume.filename }}</td>
                <td>{{ matched_resume.similarity }}%</td>
            </tr>
        </tbody>
    </table>
    <a href="{{ matched_resume.download_url }}" class="btn btn-info">Download Resume</a>
    {% endif %}
</body>
</html>
